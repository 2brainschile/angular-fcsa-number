/*! angular-fcsa-number (version 1.6.0) 2014-10-06 */
(function(){var a,b={}.hasOwnProperty;a=angular.module("fcsa-number",[]),a.directive("fcsaNumber",["fcsaNumberConfig",function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return f=a.defaultOptions,g=function(a){var c,d,e,g;if(d=angular.copy(f),null!=a.options){g=a.$eval(a.options);for(c in g)b.call(g,c)&&(e=g[c],d[c]=e,"thousandsSeparator"===c&&(d.thousandsSeparatorRegexp=new RegExp(e,"g")),"decimalMark"===c&&(d.decimalMarkRegexp=new RegExp(e,"g")))}return d},k=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},j=function(a){return 44>a||a>57||47===a},d=[0,8,13],i=function(a){return-1===d.indexOf(a)},h=function(a){return null!=a&&a.toString().split(".").length>2},e=function(a){return"."===a.decimalMark?".":a.decimalMark},m=function(a,b){var c,d,f;return c=e(b),d=a>0?"^-?\\d*"+c+"?\\d{0,"+a+"}$":"^-?\\d*$",f=new RegExp(d),function(a){return f.test(a)}},o=function(a){return function(b,c){return a>=c}},p=function(a){return function(b,c){return c>=a}},n=function(a){var b;return b=new RegExp("^-?\\d{0,"+a+"}(\\.\\d*)?$"),function(a){return b.test(a)}},l=function(a){var b;return b=[],null!=a.maxDecimals&&b.push(m(a.maxDecimals,a)),null!=a.max&&b.push(o(a.max)),null!=a.min&&b.push(p(a.min)),null!=a.maxDigits&&b.push(n(a.maxDigits)),function(a){var c,d,e,f;if(!k(a))return!1;if(h(a))return!1;for(d=Number(a),c=e=0,f=b.length;f>=0?f>e:e>f;c=f>=0?++e:--e)if(!b[c](a,d))return!1;return!0}},q=function(a,b){return a.replace(b.thousandsSeparatorRegex,"")},c=function(a){var b,c,d;return c=-1==a.indexOf(".")?"":a.replace(/^\d+(?=\.)/,""),d=a.replace(/(\.\d+)$/,""),b=d.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),""+b+c},{restrict:"A",require:"ngModel",scope:{options:"@fcsaNumber"},link:function(a,b,d,e){var f,h;return h=g(a),f=l(h),e.$parsers.unshift(function(a){return a=q(a,h),f(a)||!a?(e.$setValidity("fcsaNumber",!0),a):void e.$setValidity("fcsaNumber",!1)}),e.$formatters.push(function(a){return null==h.nullDisplay||a&&""!==a?null!=a&&f(a)?(e.$setValidity("fcsaNumber",!0),a=c(a.toString(),h),null!=h.prepend&&(a=""+h.prepend+a),null!=h.append&&(a=""+a+h.append),a):a:h.nullDisplay}),b.on("blur",function(){var a,b,c,d,g;if(b=e.$modelValue,null!=b&&f(b)){for(g=e.$formatters,c=0,d=g.length;d>c;c++)a=g[c],b=a(b);return e.$viewValue=b,e.$render()}}),b.on("focus",function(){var a;return a=b.val(),null!=h.prepend&&(a=a.replace(h.prepend,"")),null!=h.append&&(a=a.replace(h.append,"")),b.val(q(a,h)),b[0].select()}),h.preventInvalidInput===!0?b.on("keypress",function(a){return j(a.which)&&i(a.which)?a.preventDefault():void 0}):void 0}}}]),a.provider("fcsaNumberConfig",function(){var a;a={thousandsSeparator:",",thousandsSeparatorRegex:new RegExp(",","g"),decimalMark:".",decimalMarkRegex:new RegExp(".","g")},this.setDefaultOptions=function(b){return a=b},this.$get=function(){return{defaultOptions:a}}})}).call(this);